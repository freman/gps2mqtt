package checksum_test

import (
	"testing"

	"github.com/freman/gps2mqtt/checksum"
	"github.com/stretchr/testify/assert"
)

func TestXOR(t *testing.T) {
	input := []byte{0x02, 0x00, 0x00, 0x56, 0x01, 0x91, 0x75, 0x69, 0x02, 0x32, 0x00, 0xb9, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x04, 0x02, 0x9c, 0xfa, 0xee, 0x08, 0x1d, 0x81, 0x2c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x24, 0x06, 0x04, 0x01, 0x28, 0x23, 0x01, 0x04, 0x00, 0x00, 0x00, 0x65, 0x30, 0x01, 0x0f, 0x31, 0x01, 0x00, 0x51, 0x02, 0x00, 0x00, 0x57, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x9f, 0x17, 0x35, 0x30, 0x35, 0x2c, 0x30, 0x31, 0x2c, 0x37, 0x30, 0x30, 0x64, 0x2c, 0x30, 0x38, 0x63, 0x62, 0x34, 0x61, 0x32, 0x39, 0x2c, 0x31, 0x35, 0xe1, 0x01, 0x64, 0xe2, 0x02, 0x00, 0x00}
	output := checksum.XOR(input)

	assert.Equal(t, 0xf4, output)
}
